(self.webpackJsonp=self.webpackJsonp||[]).push([[1],{537:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c}));n(9);var o=n(0);function a(e,t,n){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:String(o))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const i={C:67,D:68,F:70,S:83,U:85,V:86,F2:113,Delete:8,Enter:13,Escape:27,Shift:16,Ctrl:17,Alt:18,Cmd:91,Tilde:192,Backslash:220,Meta:"navigator"in e&&/Mac/i.test(navigator.platform)?91:17},r=(e,t)=>t.every(t=>{switch(t){case i.Ctrl:return e.ctrlKey;case i.Meta:return e.metaKey;case i.Alt:return e.altKey;default:return e.keyCode===t}});class c extends o.PureComponent{constructor(...e){super(...e),a(this,"_handleKeydown",e=>{const{bindings:t,onTrigger:n}=this.props;for(const o in t)if(t.hasOwnProperty(o)){const a=t[o];if(r(e,a.combo)){e.preventDefault(),n(o,a);break}}})}componentDidMount(){document.addEventListener("keydown",this._handleKeydown)}componentWillUnmount(){document.removeEventListener("keydown",this._handleKeydown)}render(){return null}}}).call(this,n(13))},559:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var o=n(1),a=n(32),i=n.n(a),r=n(668),c=n.n(r),s=n(0),l=n(537),p=n(2);const d="navigator"in e&&/Mac/i.test(navigator.platform),u={Cmd:"⌘",Delete:"⌫",Enter:"↩",Shift:"⇧",Ctrl:d?"⌃":"Ctrl",Alt:d?"⌥":"Alt",Backslash:"\\",Tilde:"`"};function m({combo:e,className:t,boxed:n=!1}){return s.createElement("kbd",{className:i()(Object(o.css)(h.shortcutLabel),n&&Object(o.css)(h.boxedShortcut),t)},e.map(e=>{const t=c()(l.a,t=>t===e);return t&&u[t]?u[t]:t}).join(d?"":"+"))}const h=o.StyleSheet.create({shortcutLabel:{color:"inherit",fontFamily:"var(--font-monospace)",fontSize:"90%",opacity:.5,boxShadow:"none",display:"inline-block",lineHeight:"initial"},boxedShortcut:{padding:"0.2rem 0.4rem",border:"1px solid ".concat(Object(p.a)("border")),borderBottomWidth:2,borderRadius:3,opacity:.66}})}).call(this,n(13))},616:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(9);var o=n(1),a=n(0),i=n(537),r=n(559);const c={save:{description:"Save changes",combo:[i.a.Meta,i.a.S]},update:{type:"update",description:"Update code on device",combo:[i.a.Meta,i.a.U]},tree:{description:"Toggle sidebar",combo:[i.a.Meta,i.a.Backslash]},panels:{description:"Toggle error and log panels",combo:[i.a.Ctrl,i.a.Tilde]},format:{description:"Format code with prettier",combo:[i.a.Ctrl,i.a.Alt,i.a.F]},shortcuts:{description:"Show keyboard shortcuts",combo:[i.a.Meta,i.a.Alt,i.a.Shift]}};class s extends a.PureComponent{render(){return a.createElement("table",{className:Object(o.css)(l.shortcutList)},a.createElement("tbody",null,Object.entries(c).map(([e,t])=>a.createElement("tr",{key:e},a.createElement("td",{className:Object(o.css)(l.shortcutCell,l.shortcutLabelCell)},a.createElement(r.a,{boxed:!0,combo:t.combo})),a.createElement("td",{className:Object(o.css)(l.shortcutCell,l.shortcutDescriptionCell)},t.description)))))}}t.b=s;const l=o.StyleSheet.create({shortcutList:{fontSize:"1.2em",tableLayout:"fixed"},shortcutCell:{padding:"6px 8px"},shortcutLabelCell:{textAlign:"right",marginRight:8},shortcutDescriptionCell:{textAlign:"left"}})},618:function(e,t,n){"use strict";var o=n(1),a=n(0),i=n(2);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}t.a=function({title:e,label:t,responsive:n,children:i,small:s,...l}){return a.createElement("button",r({},l,{className:Object(o.css)(c.button,s&&c.small,l.disabled&&c.disabled)}),i,t?a.createElement("span",{className:Object(o.css)(c.label,!i&&c.labelNoIcon,n&&c.responsive)},t):null,a.createElement("span",{className:Object(o.css)(c.phantom)},a.createElement("span",{className:Object(o.css)(c.tooltip)},e)))};const c=o.StyleSheet.create({button:{position:"relative",height:40,minWidth:40,margin:"0 8px",display:"flex",alignItems:"center",justifyContent:"center",appearance:"none",backgroundColor:"transparent",color:"inherit",padding:0,outline:0,border:0,borderRadius:2,whiteSpace:"nowrap",textDecoration:"none",fill:Object(i.a)("text"),stroke:Object(i.a)("text"),":active":{opacity:.8},":hover":{cursor:"pointer",backgroundColor:Object(i.a)("hover")}},small:{height:32,minWidth:32,margin:0,padding:"0 8px 0 0",":hover":{backgroundColor:"transparent"}},disabled:{cursor:"not-allowed",pointerEvents:"none",opacity:.3},phantom:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:0,zIndex:1,":hover":{opacity:1,pointerEvents:"auto"}},tooltip:{position:"absolute",top:"calc(100% + 4px)",left:"50%",transform:"translateX(-50%)",marginLeft:-2.5,borderRadius:2,fontSize:12,padding:"4px 8px",whiteSpace:"nowrap",pointerEvents:"none",boxShadow:Object(i.c)("popover"),backgroundColor:Object(i.a)("content","dark"),color:Object(i.a)("text","dark")},label:{margin:"0 12px",color:Object(i.a)("text")},labelNoIcon:{margin:"0 12px 0 0"},responsive:{"@media (max-width: 960px)":{display:"none"}}})},667:function(e,t,n){e.exports=n.p+"assets/6b544ca2f9529bc2b22aa6978ebd5862.svg"},669:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(9);var o=n(1),a=n(0),i=n(670),r=n(2);function c({icon:e,label:t,content:n}){const[r,c]=a.useState(!1),l=a.useRef(null);return a.useEffect(()=>{const e=e=>{var t;e.target===l.current||null!==(t=l.current)&&void 0!==t&&t.contains(e.target)||c(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),a.createElement("div",{ref:l,className:Object(o.css)(s.panelContainer)},a.createElement(i.a,{icon:e,active:r,onClick:()=>c(e=>!e)},t),r?a.createElement("div",{className:Object(o.css)(s.pane)},n):null)}const s=o.StyleSheet.create({panelContainer:{position:"relative",display:"flex",alignItems:"center"},pane:{display:"flex",alignItems:"stretch",justifyContent:"flex-end",flexDirection:"column",position:"absolute",right:0,bottom:32,minWidth:160,padding:"8px 0",borderWidth:1,borderRadius:3,borderStyle:"solid",backgroundColor:Object(r.a)("content"),borderColor:Object(r.a)("border"),boxShadow:Object(r.c)("small"),color:Object(r.a)("text"),zIndex:-1}})},670:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(1),a=n(0),i=n(2);function r({active:e,icon:t,children:n,onClick:i}){return a.createElement("button",{onClick:i,style:t?{backgroundImage:"url(".concat(t,")")}:void 0,className:Object(o.css)(c.button,n?c.buttonLabel:void 0,e&&c.active)},n)}const c=o.StyleSheet.create({button:{position:"relative",border:0,outline:0,margin:0,height:29,padding:"0 16px",appearance:"none",backgroundColor:"transparent",backgroundSize:16,backgroundRepeat:"no-repeat",backgroundPosition:"center right 8px",":active":{backgroundColor:Object(i.a)("hover"),color:Object(i.a)("soft")},":hover":{backgroundColor:Object(i.a)("hover"),color:Object(i.a)("soft")}},buttonLabel:{"@media (min-width: 720px)":{padding:"5px 32px 5px 8px"}},active:{backgroundColor:Object(i.a)("hover"),color:Object(i.a)("soft")}})},671:function(e,t,n){e.exports=n.p+"assets/48505df7e1a1eb25606c4789c3a3e235.png"},758:function(e,t,n){e.exports=n.p+"assets/f95e873b5154c5128ccb7bf69715156d.svg"},989:function(e,t,n){"use strict";n.r(t);n(9);var o=n(1),a=n(32),i=n.n(a),r=n(0),c=n(520),s=n(172),l=n(18),p=n(190),d=n.n(p),u=n(77);const m={iphone8:68,iphone8plus:61,iphone11pro:65,iphone12:65,iphone13pro:65,iphone13promax:59,iphone14pro:64,iphone14promax:59,ipadair4thgeneration:30,nexus5:70,pixel4:72,pixel4xl:54,pixel6:70,pixel6pro:55,pixel7:70,pixel7pro:55,galaxytabs7:39},h={iphone8:76,iphone8plus:69,iphone11pro:72,iphone12:72,iphone13pro:72,iphone13promax:66,iphone14pro:72,iphone14promax:66,ipadair4thgeneration:34,nexus5:79,pixel4:80,pixel4xl:60,pixel6:78,pixel6pro:61,pixel7:78,pixel7pro:61,galaxytabs7:44};function b(e){var t;const n=null===(t=u.a.appetize)||void 0===t?void 0:t[e];if(!n)throw new Error("No Appetize config found for SDK ".concat(e,", configure it in client/configs/constants.tsx"));return n}var v=n(171),g=n(2),f=n(63),y=n(187);function C(e,t,n){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:String(o))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class x extends r.PureComponent{constructor(...e){super(...e),C(this,"state",{appetizeStatus:{type:"unknown"},appetizeURL:x.getAppetizeURL(this.props,!1),autoplay:!1,payerCodeFormStatus:{type:"closed"},platform:this.props.platform,sdkVersion:this.props.sdkVersion,theme:this.props.theme,viewer:this.props.viewer}),C(this,"handleLaunchRequest",()=>{l.a.getInstance().logEvent("RAN_EMULATOR")}),C(this,"handlePayerCodeLink",()=>{this.setState({payerCodeFormStatus:{type:"open",value:""}}),l.a.getInstance().logEvent("REQUESTED_APPETIZE_CODE",{},"previewQueue")}),C(this,"handlePostMessage",({origin:e,data:t})=>{var n,o;if(e===b(this.props.sdkVersion).url){let e;switch(this.waitingForMessage&&(clearInterval(this.waitingForMessage),this.waitingForMessage=null),t){case"sessionRequested":e={type:"requested"};break;case"sessionConnecting":e={type:"connecting"};break;case"appLaunch":e={type:"launch"},null===(n=(o=this.props).onAppLaunch)||void 0===n||n.call(o),"queued"===this.state.appetizeStatus.type&&l.a.getInstance().logEvent("APP_LAUNCHED",{},"previewQueue"),l.a.getInstance().clearTimer("previewQueue");break;case"timeoutWarning":e={type:"timeout"};break;case"sessionEnded":e={type:"unknown"},l.a.getInstance().clearTimer("previewQueue");break;case"accountQueued":e={type:"queued",position:void 0};break;default:t&&"accountQueuedPosition"===t.type&&(e={type:"queued",position:t.position},"queued"===this.state.appetizeStatus.type&&this.state.appetizeStatus.position||(l.a.getInstance().logEvent("QUEUED_FOR_PREVIEW",{queuePosition:e.position}),l.a.getInstance().startTimer("previewQueue")))}e&&this.setState({appetizeStatus:e})}}),C(this,"handlePayerCodeChange",e=>this.setState({payerCodeFormStatus:{type:"open",value:e.target.value}})),C(this,"handlePayerCodeSubmit",e=>{e.preventDefault(),this.props.viewer&&this.savePayerCode(),l.a.getInstance().logEvent("ENTERED_APPETIZE_CODE",{},"previewQueue")}),C(this,"savePayerCode",()=>{const{payerCodeFormStatus:e}=this.state;"open"===e.type&&e.value&&(this.props.setMetadata({appetizeCode:e.value}),this.setState({payerCodeFormStatus:{type:"submitted"}}))}),C(this,"iframe",r.createRef()),C(this,"waitingForMessage",void 0),C(this,"handleTapToPlay",()=>{this.waitingForMessage||(this.requestSession(),this.waitingForMessage=setInterval(this.requestSession,1e3))}),C(this,"requestSession",()=>{var e,t;null===(e=this.iframe.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage("requestSession","*")}),C(this,"endSession",()=>{var e,t;null===(e=this.iframe.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage("endSession","*")}),C(this,"onClickRunOnPhone",()=>{this.props.onShowModal("device-instructions")})}static getAppetizeURL(e,t){const{experienceURL:n,platform:o,isEmbedded:a,payerCode:i,theme:r,devices:c,sdkVersion:s}=e;return function({type:e,experienceURL:t,platform:n,scale:o,autoplay:a,payerCode:i,previewQueue:r,deviceColor:c="black",devices:s,sdkVersion:l}){const p={screenOnly:!1===(null==s?void 0:s._showFrame),scale:o,autoplay:!!a,embed:!0,device:void 0,launchUrl:t,xdocMsg:!0,deviceColor:c,xDocMsg:!0,orientation:"portrait",debug:!0,pc:i},u=null==s?void 0:s[n];null!=u&&u.device?p.device=u.device:p.device="ios"===n?"iphone12":"pixel4",p.device&&!p.scale&&(null!=u&&u.scale?p.scale=u.scale:p.scale="embedded"===e?m[p.device]:h[p.device]);const v=b(l),g="secondary"===r?v.embed[n]:v[r][n];return"".concat(v.url,"/embed/").concat(g,"?").concat(d.a.stringify(p),"&params=").concat(encodeURIComponent(JSON.stringify({EXDevMenuDisableAutoLaunch:!0,EXKernelDisableNuxDefaultsKey:!0})))}({type:a?"embedded":"website",experienceURL:n,autoplay:t,platform:o,previewQueue:a?"secondary":"main",deviceColor:"dark"===r?"white":"black",payerCode:i,devices:c,sdkVersion:s})}static getDerivedStateFromProps(e,t){if(e.platform!==t.platform||e.sdkVersion!==t.sdkVersion||e.theme!==t.theme){const n="submitted"===t.payerCodeFormStatus.type;return{appetizeStatus:{type:"unknown"},appetizeURL:x.getAppetizeURL(e,n),autoplay:n,payerCodeFormStatus:{type:"closed"},platform:e.platform,sdkVersion:e.sdkVersion,theme:e.theme,viewer:e.viewer}}return null}componentDidMount(){window.addEventListener("message",this.handlePostMessage),window.addEventListener("unload",this.endSession),this.props.onPopupUrl(this.state.appetizeURL)}componentDidUpdate(e,t){t.appetizeStatus!==this.state.appetizeStatus&&"requested"===this.state.appetizeStatus.type?this.handleLaunchRequest():this.state.appetizeURL!==t.appetizeURL&&this.props.onPopupUrl(this.state.appetizeURL)}componentWillUnmount(){this.endSession(),window.removeEventListener("message",this.handlePostMessage),window.removeEventListener("unload",this.endSession)}render(){var e;const{appetizeStatus:t,payerCodeFormStatus:n,viewer:a,appetizeURL:i,platform:s}=this.state,{width:l,isEmbedded:p,isPopupOpen:d}=this.props;return r.createElement(r.Fragment,null,r.createElement("div",{className:Object(o.css)(p?E.containerEmbedded:E.container),style:{width:p?l:l-10}},r.createElement("iframe",{ref:this.iframe,key:i,src:i,className:Object(o.css)(E.frame)}),"unknown"===t.type?r.createElement("div",{style:{position:"absolute",top:0,left:0,right:p?4:12,bottom:0,display:"flex",flexDirection:"column",paddingTop:"android"===s?p?95:110:p?60:110}},r.createElement("a",{className:Object(o.css)(E.largeButton),onClick:this.handleTapToPlay},r.createElement("div",{className:Object(o.css)(E.buttonFrame)},r.createElement("span",{className:Object(o.css)(E.buttonText)},"Tap to play"))),d?null:r.createElement("a",{className:Object(o.css)(E.largeButton),onClick:this.onClickRunOnPhone},r.createElement("div",{className:Object(o.css)(E.buttonFrame)},r.createElement("span",{className:Object(o.css)(E.buttonText)},"Run on your device")))):null),"queued"===t.type?r.createElement("div",{className:Object(o.css)(E.queueModal,E.centered)},r.createElement("div",{className:Object(o.css)(E.queueModalContent)},p?r.createElement("button",{className:Object(o.css)(E.dismissButton),onClick:()=>{this.setState({appetizeStatus:{type:"unknown"}})}},"X"):null,r.createElement("h4",null,"Device preview is at capacity"),r.createElement("p",null,"Queue position: ",null!==(e=t.position)&&void 0!==e?e:1),r.createElement("h3",null,"Don't want to wait?"),p?null:r.createElement("div",null,r.createElement("p",null,"Use your own Appetize.io account"),r.createElement("div",{className:Object(o.css)(E.payerCodeForm)},"open"===n.type?r.createElement("form",{onSubmit:this.handlePayerCodeSubmit},r.createElement("input",{type:"text",placeholder:"Payer Code",value:n.value,onChange:this.handlePayerCodeChange,className:Object(o.css)(E.payerCodeInput)}),r.createElement(f.a,{type:"submit",variant:"primary",className:Object(o.css)(E.activateButton)},"Activate")):"submitted"===n.type?r.createElement("p",{className:Object(o.css)(E.payerCodeSubmitted)},"Payer code saved to profile!"):a?r.createElement(y.a,{variant:"primary",href:"".concat(b(this.props.sdkVersion).url,"/payer-code"),onClick:this.handlePayerCodeLink,target:"_blank",className:Object(o.css)(E.blockButton)},"Use Appetize.io"):r.createElement(y.a,{variant:"primary",href:Object(c.a)(),className:Object(o.css)(E.blockButton)},"Log in to Expo")),r.createElement("p",null,"or")),r.createElement(y.a,{variant:"primary",onClick:this.onClickRunOnPhone,className:Object(o.css)(E.blockButton)},"Run it on your phone"))):null)}}var w=Object(v.a)(Object(s.a)(x));const E=o.StyleSheet.create({loading:{position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:1},centered:{display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto"},container:{position:"relative",height:670,overflow:"hidden",margin:"auto",marginLeft:10,zIndex:2},containerEmbedded:{position:"relative",height:610,overflow:"hidden",margin:"auto",zIndex:2},frame:{width:9999,height:9999,border:0,overflow:"hidden"},queueModal:{color:"white",backgroundColor:"rgba(36, 43, 56, 0.8)",position:"absolute",zIndex:2,top:0,left:0,right:0,bottom:0,padding:28},queueModalContent:{textAlign:"center"},blockButton:{display:"block",flex:1,cursor:"pointer"},activateButton:{":only-of-type":{marginLeft:0,marginRight:0,borderBottomLeftRadius:0,borderTopLeftRadius:0}},payerCodeForm:{height:50,display:"flex",flexDirection:"row"},payerCodeInput:{fontFamily:"var(--font-monospace)",padding:7,marginRight:-1,borderTopLeftRadius:3,borderBottomLeftRadius:3,width:133,border:"1px solid ".concat(Object(g.a)("selected")),color:Object(g.a)("text")},payerCodeSubmitted:{margin:"0 auto",padding:14,textAlign:"center",color:Object(g.a)("success")},largeButton:{marginTop:20,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},buttonFrame:{height:70,width:225,backgroundColor:Object(g.a)("content","light"),borderRadius:30,alignItems:"center",justifyContent:"center",display:"flex",paddingLeft:20,paddingRight:20,boxShadow:Object(g.c)("popover")},buttonText:{color:Object(g.a)("text","light"),fontSize:20,fontWeight:400},dismissButton:{position:"absolute",fontSize:20,fontWeight:400,right:0,top:0,zIndex:2,height:48,width:48,padding:16,border:0,backgroundSize:16,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:"transparent"}});var O=n(612),j=n.n(O),S=Object(v.a)((function(e){const{theme:t,name:a,experienceURL:i}=e;return r.createElement("div",{className:Object(o.css)(k.container)},r.createElement("div",{className:Object(o.css)(k.imageContainer)},r.createElement("img",{className:Object(o.css)(k.image),src:n("dark"===t?667:758)})),r.createElement("div",{className:Object(o.css)(k.content)},r.createElement("h4",{className:Object(o.css)(k.title)},a),r.createElement("p",{className:Object(o.css)(k.subtitle)},i)))}));const k=o.StyleSheet.create({container:{height:56,display:"flex",flexDirection:"row",alignItems:"center",padding:"0 2px 0 8px",boxShadow:Object(g.c)("small"),borderRadius:4,color:Object(g.a)("text"),border:"1px solid ".concat(Object(g.a)("border")),textDecoration:"none",backgroundColor:Object(g.a)("content"),margin:"0 10px 10px 10px"},imageContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:Object(g.a)("content"),marginRight:8,borderWidth:1,borderColor:Object(g.a)("border"),borderRadius:3,borderStyle:"solid",height:40,width:40},image:{display:"block",width:30,height:30},content:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},title:{fontSize:14,fontWeight:"bold",marginTop:0,marginBottom:0,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},subtitle:{fontSize:12,fontWeiht:"bold",margin:0,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",opacity:.5}});var L=n(510),N=n(616),R=n(186),D=n(180),P=n(618),I=n(669),M=n(559),U=n(535);function T(e,t,n){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:String(o))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class z extends r.PureComponent{constructor(...e){super(...e),T(this,"state",{connectedDevices:[],copiedToClipboard:!1}),T(this,"_handleCopyToClipboard",()=>{this.setState({copiedToClipboard:!0}),setTimeout(()=>this.setState(()=>({copiedToClipboard:!1})),1e3)}),T(this,"renderConnectedDevice",e=>{const{id:t,name:n,status:a}=e;return r.createElement("div",{key:t,className:Object(o.css)(F.deviceContainer)},this.renderDevicePlatformIcon(e),r.createElement("div",{className:Object(o.css)(F.deviceContent)},r.createElement("h4",{className:Object(o.css)(F.deviceTitle)},n),r.createElement("p",{className:Object(o.css)(F.deviceSubtitle)},"connected"===a?"Connected":"Disconnected")))})}static getDerivedStateFromProps(e){const{connectedDevices:t}=e;return{connectedDevices:t}}render(){const{experienceURL:e,isEmbedded:t,width:a}=this.props,{connectedDevices:i,copiedToClipboard:c}=this.state,s=i.length>=1;return r.createElement("div",{className:Object(o.css)(F.container),style:{width:a}},r.createElement(D.a,{visible:c},"Copied to clipboard!"),r.createElement("div",{className:Object(o.css)(F.frame)},r.createElement("h3",{className:Object(o.css)(F.title)},"Download"," ",r.createElement("a",{className:Object(o.css)(F.link),href:"".concat(Object(L.b)(),"/client"),target:"blank"},"Expo Go")," ","and scan",r.createElement("br",null),"the QR code to get started."),r.createElement("div",{className:Object(o.css)(F.qrcode),style:{width:a-20,height:a-20}},r.createElement(R.a,{size:a-40,experienceURL:e})),!t&&r.createElement(j.a,{text:e,onCopy:this._handleCopyToClipboard},r.createElement("div",{className:Object(o.css)(F.experienceLink)},e)),r.createElement("div",{className:Object(o.css)(F.flex)}),r.createElement("div",{className:Object(o.css)(F.connectedDevices)},r.createElement("div",{className:Object(o.css)(F.connectedDevicesHeader,t?F.connectedDevicesEmbedded:void 0)},r.createElement("div",{className:Object(o.css)(F.connectedDevicesTitle)},r.createElement("h3",null,"Connected devices"),r.createElement("span",{className:Object(o.css)(F.connectedDevicesCount)},i.length)),r.createElement("div",{className:Object(o.css)(F.popupButton)},r.createElement(I.a,{icon:n(671),content:this.renderPopupMenu()}))),!s&&this.renderNoConnectedDevices(),i.map(this.renderConnectedDevice))))}renderPopupMenu(){const{sendCodeOnChangeEnabled:e,onToggleSendCode:t,onSendCode:n,onReloadSnack:a}=this.props,{connectedDevices:i}=this.state,c=i.length>1?"apps":"app",s=i.length>1?"devices":"device",l=i.length>0;return r.createElement("div",{className:Object(o.css)(F.popupContainer)},l&&r.createElement(U.a,{checked:e,onChange:t,label:"Update as you type"}),l&&r.createElement("div",{className:Object(o.css)(F.popupRow)},r.createElement(P.a,{small:!0,title:"Update changes on connected ".concat(s),label:"Update now",onClick:n},r.createElement("svg",{width:"14px",height:"17px",viewBox:"0 0 14 17"},r.createElement("path",{transform:"translate(-5.000000, -3.000000)",d:"M9,16 L15,16 L15,10 L19,10 L12,3 L5,10 L9,10 L9,16 Z M5,18 L19,18 L19,20 L5,20 L5,18 Z"}))),r.createElement(M.a,{combo:N.a.update.combo})),l&&r.createElement("div",{className:Object(o.css)(F.popupRow)},r.createElement(P.a,{small:!0,title:"Reload ".concat(c," on connected ").concat(s),label:"Reload ".concat(c),onClick:a},r.createElement("svg",{width:"16px",height:"20px",viewBox:"0 0 16 20"},r.createElement("path",{d:"M8,3.5 L8,0 L3,5 L8,10 L8,5.5 C11.314,5.5 14,8.186 14,11.5 C14,14.814 11.314,17.5 8,17.5 C4.686,17.5 2,14.814 2,11.5 L0,11.5 C0,15.918 3.582,19.5 8,19.5 C12.418,19.5 16,15.918 16,11.5 C16,7.082 12.418,3.5 8,3.5"})))))}renderNoConnectedDevices(){const{viewer:e,experienceURL:t,experienceName:n,isEmbedded:a}=this.props;return e?r.createElement(r.Fragment,null,r.createElement("p",{className:Object(o.css)(F.notConnectedText)},'This Snack is visible on the "Projects" tab of your signed in Expo Go app.'),r.createElement(S,{name:n,experienceURL:t})):r.createElement("p",{className:Object(o.css)(F.notConnectedText)},r.createElement("a",{href:a?"".concat(Object(L.b)(),"/login"):Object(c.a)(),target:a?"_blank":void 0,className:Object(o.css)(F.link)},"Log in"),r.createElement("span",null," "),"to open this Snack from Expo Go on your device or simulator.")}renderDevicePlatformIcon(e){const{platform:t}=e;switch(t){case"android":return r.createElement("svg",{className:Object(o.css)(F.deviceIcon),width:"16px",height:"20px",viewBox:"0 0 16 20"},r.createElement("path",{transform:"translate(-16.000000, -146.000000)",d:"M19.2,160.325197 C19.2,160.762881 19.56,161.120986 20,161.120986 L20.8,161.120986 L20.8,163.906247 C20.8,164.566752 21.336,165.099931 22,165.099931 C22.664,165.099931 23.2,164.566752 23.2,163.906247 L23.2,161.120986 L24.8,161.120986 L24.8,163.906247 C24.8,164.566752 25.336,165.099931 26,165.099931 C26.664,165.099931 27.2,164.566752 27.2,163.906247 L27.2,161.120986 L28,161.120986 C28.44,161.120986 28.8,160.762881 28.8,160.325197 L28.8,152.367307 L19.2,152.367307 L19.2,160.325197 L19.2,160.325197 Z M17.2,152.367307 C16.536,152.367307 16,152.900485 16,153.56099 L16,159.131513 C16,159.792018 16.536,160.325197 17.2,160.325197 C17.864,160.325197 18.4,159.792018 18.4,159.131513 L18.4,153.56099 C18.4,152.900485 17.864,152.367307 17.2,152.367307 L17.2,152.367307 Z M30.8,152.367307 C30.136,152.367307 29.6,152.900485 29.6,153.56099 L29.6,159.131513 C29.6,159.792018 30.136,160.325197 30.8,160.325197 C31.464,160.325197 32,159.792018 32,159.131513 L32,153.56099 C32,152.900485 31.464,152.367307 30.8,152.367307 L30.8,152.367307 Z M26.824,147.719899 L27.868,146.681394 C28.024,146.526215 28.024,146.275542 27.868,146.120363 C27.712,145.965184 27.46,145.965184 27.304,146.120363 L26.12,147.294152 C25.48,146.979815 24.764,146.796784 24,146.796784 C23.232,146.796784 22.512,146.979815 21.868,147.298131 L20.68,146.116384 C20.524,145.961205 20.272,145.961205 20.116,146.116384 C19.96,146.271563 19.96,146.522237 20.116,146.677415 L21.164,147.719899 C19.976,148.591288 19.2,149.991877 19.2,151.571518 L28.8,151.571518 C28.8,149.987898 28.02,148.587309 26.824,147.719899 L26.824,147.719899 Z M26,149.978945 C26.2209139,149.978945 26.4,149.800802 26.4,149.581051 C26.4,149.361299 26.2209139,149.183156 26,149.183156 C25.7790861,149.183156 25.6,149.361299 25.6,149.581051 C25.6,149.800802 25.7790861,149.978945 26,149.978945 Z M22,149.978945 C22.2209139,149.978945 22.4,149.800802 22.4,149.581051 C22.4,149.361299 22.2209139,149.183156 22,149.183156 C21.7790861,149.183156 21.6,149.361299 21.6,149.581051 C21.6,149.800802 21.7790861,149.978945 22,149.978945 Z"}));case"web":return r.createElement("svg",{className:Object(o.css)(F.deviceIcon),width:"18px",height:"18px",viewBox:"0 0 18 18"},r.createElement("g",{strokeWidth:"1",fill:"none",stroke:Object(g.a)("selected")},r.createElement("circle",{cx:"9",cy:"9",r:"8"}),r.createElement("rect",{x:"2",y:"11",width:"14",height:"0.5"}),r.createElement("rect",{x:"2",y:"6",width:"14",height:"0.5"}),r.createElement("ellipse",{cx:"9",cy:"9",rx:"3",ry:"8"})));case"ios":default:return r.createElement("svg",{className:Object(o.css)(F.deviceIcon),width:"16px",height:"16px",viewBox:"0 0 16 16"},r.createElement("path",{d:"M5,0 L11,0 C13.7614237,-5.07265313e-16 16,2.23857625 16,5 L16,11 C16,13.7614237 13.7614237,16 11,16 L5,16 C2.23857625,16 3.38176876e-16,13.7614237 0,11 L0,5 C-3.38176876e-16,2.23857625 2.23857625,5.07265313e-16 5,0 Z M2.79296875,11 L3.5,11 L3.5,6.890625 L2.79296875,6.890625 L2.79296875,11 Z M2.64453125,5.625 C2.64453125,5.90625 2.859375,6.11328125 3.140625,6.11328125 C3.4375,6.11328125 3.65234375,5.90625 3.65234375,5.625 C3.65234375,5.33984375 3.4375,5.1328125 3.140625,5.1328125 C2.859375,5.1328125 2.64453125,5.33984375 2.64453125,5.625 Z M9.20385423,8.71875 L9.20385423,7.94921875 C9.20385423,6.4375 8.36401048,5.55859375 7.05541673,5.55859375 C5.74682298,5.55859375 4.90697923,6.43359375 4.90697923,7.94921875 L4.90697923,8.71875 C4.90697923,10.2304688 5.74682298,11.109375 7.05541673,11.109375 C8.36401048,11.109375 9.20385423,10.2304688 9.20385423,8.71875 Z M10.1616147,9.64453125 C10.2358335,10.5039062 10.962396,11.109375 12.0913022,11.109375 C13.321771,11.109375 14.0913022,10.4726562 14.0913022,9.50390625 C14.0913022,8.7265625 13.634271,8.2890625 12.7006772,8.046875 L11.790521,7.80859375 C11.3022397,7.6875 11.040521,7.4296875 11.040521,7.0546875 C11.040521,6.53515625 11.4897397,6.1796875 12.1616147,6.1796875 C12.7827085,6.1796875 13.2045835,6.4765625 13.3022397,6.9453125 L14.024896,6.9453125 C13.9428647,6.1328125 13.228021,5.54296875 12.1733335,5.54296875 C11.087396,5.54296875 10.3100522,6.18359375 10.3100522,7.08984375 C10.3100522,7.8046875 10.7709897,8.29296875 11.571771,8.5 L12.4975522,8.73828125 C13.0952085,8.890625 13.3647397,9.13671875 13.3647397,9.5625 C13.3647397,10.1171875 12.9077085,10.4726562 12.165521,10.4726562 C11.4702085,10.4726562 10.9897397,10.1484375 10.8881772,9.64453125 L10.1616147,9.64453125 Z M8.48119798,7.94921875 L8.48119798,8.72265625 C8.48119798,9.89453125 7.86401048,10.4648438 7.05541673,10.4648438 C6.24291673,10.4648438 5.62963548,9.89453125 5.62963548,8.72265625 L5.62963548,7.94921875 C5.62963548,6.7734375 6.24291673,6.203125 7.05541673,6.203125 C7.86401048,6.203125 8.48119798,6.7734375 8.48119798,7.94921875 Z"}))}}}var B=Object(v.a)(Object(s.a)(z));const F=o.StyleSheet.create({container:{display:"flex",flex:1,flexDirection:"column"},frame:{display:"flex",flex:1,width:"100%",flexDirection:"column"},title:{textAlign:"center"},qrcode:{backgroundColor:Object(g.a)("content","light"),boxShadow:Object(g.c)("small"),borderRadius:4,padding:10,marginLeft:10},experienceLink:{cursor:"pointer",marginTop:"0.5em",fontSize:13,opacity:0,padding:"0 12px",textAlign:"center",":hover":{opacity:.75,transition:".5s"}},flex:{flex:1},connectedDevices:{display:"flex",alignSelf:"stretch",flexDirection:"column"},connectedDevicesHeader:{display:"flex",flexDirection:"row",flexShrink:0,justifyContent:"space-between",alignItems:"center",padding:"0 12px",borderTop:"1px solid ".concat(Object(g.a)("border-editor"))},connectedDevicesEmbedded:{border:"none"},connectedDevicesTitle:{display:"flex",flexDirection:"row",alignItems:"center"},connectedDevicesCount:{marginLeft:10,height:20,minWidth:20,borderRadius:"50%",backgroundColor:Object(g.a)("text"),color:Object(g.a)("background"),opacity:.5,textAlign:"center"},popupButton:{zIndex:1},popupContainer:{},popupRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",margin:"0 12px"},notConnectedText:{opacity:.7,marginLeft:12,marginRight:12,marginTop:0},deviceIDText:{fontSize:11,fontFamily:"var(--font-monospace)"},deviceContainer:{height:60,display:"flex",padding:"0 12px",cursor:"pointer",color:"inherit",textDecoration:"none",flexDirection:"row",alignItems:"center",":hover":{backgroundColor:Object(g.a)("hover")}},deviceIcon:{height:36,width:36,marginRight:16,fill:Object(g.a)("selected")},deviceContent:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},deviceTitle:{fontSize:16,fontWeight:"bold",marginTop:0,marginBottom:0,whiteSpace:"nowrap",textOverflow:"ellipsis"},deviceSubtitle:{fontSize:12,margin:0,whiteSpace:"nowrap",textOverflow:"ellipsis",opacity:.5},link:{color:Object(g.a)("text"),appearance:"none",background:"none",border:0,margin:0,padding:0,textDecoration:"underline",cursor:"pointer"}});function A({previewRef:e,previewURL:t,onPopupUrl:n}){return r.useEffect(()=>n(t),[t]),r.createElement("div",{className:Object(o.css)(q.container)},r.createElement("iframe",{ref:t=>{var n;return e.current=null!==(n=null==t?void 0:t.contentWindow)&&void 0!==n?n:null},src:t,allow:W,className:Object(o.css)(q.frame)}))}const q=o.StyleSheet.create({container:{position:"relative",display:"flex",flex:1,width:"100%",height:"100%"},frame:{position:"relative",width:"100%",height:"100%",border:0,zIndex:1,backgroundColor:Object(g.a)("content","light")}}),W=["accelerometer","ambient-light-sensor","autoplay","battery","camera","fullscreen","gamepad","geolocation","gyroscope","idle-detection","magnetometer","microphone","midi","payment","picture-in-picture","screen-wake-lock","usb"].join("; ");var Q=n(604);function V(e,t,n){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:String(o))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Z="(min-width: ".concat(u.a.preview.minWidth,"px)"),_="(min-width: ".concat(u.a.preview.embeddedMinWidth,"px)");class K extends r.PureComponent{constructor(...e){super(...e),V(this,"state",{isRendered:!1,isPopupOpen:!1}),V(this,"handleMediaQuery",e=>this.setState({isRendered:e.matches})),V(this,"handlePopup",()=>{var e;this.popup=window.open(this.state.popupUrl,"snack-device","width=327,height=668"),null!==(e=this.popup)&&void 0!==e&&e.closed||(this.setState({isPopupOpen:!0},()=>{this.props.previewRef.current=this.popup}),clearInterval(this.popupInterval),this.popupInterval=setInterval(()=>{this.popup&&!this.popup.closed||(clearInterval(this.popupInterval),this.popup=null,this.setState({isPopupOpen:!1}))},500))}),V(this,"handlePopupUrl",e=>this.setState({popupUrl:e})),V(this,"popupInterval",void 0),V(this,"popup",null),V(this,"mql",null)}componentDidMount(){this.mql=window.matchMedia(this.props.isEmbedded?_:Z),this.mql.addListener(this.handleMediaQuery),this.handleMediaQuery(this.mql)}componentDidUpdate(e,t){this.state.isPopupOpen&&t.popupUrl!==this.state.popupUrl&&this.handlePopup()}componentWillUnmount(){var e,t;clearInterval(this.popupInterval),null===(e=this.mql)||void 0===e||e.removeListener(this.handleMediaQuery),null===(t=this.popup)||void 0===t||t.close()}render(){const{isPopupOpen:e,isRendered:t}=this.state;if(!t||e)return null;const{className:n,width:a,connectedDevices:c,experienceURL:s,experienceName:l,name:p,onAppLaunch:d,onChangePlatform:u,onShowModal:m,onReloadSnack:h,onSendCode:b,onToggleSendCode:v,payerCode:g,platform:f,platformOptions:y,previewRef:C,previewURL:x,isEmbedded:E,sdkVersion:O,sendCodeOnChangeEnabled:j,theme:S,devices:k}=this.props;return r.createElement("div",{className:i()(Object(o.css)(E?H.embedded:H.container),n),style:{width:a}},E?null:r.createElement("div",{className:Object(o.css)(H.header)},r.createElement(Q.a,{options:y,value:f,onValueChange:u,className:Object(o.css)(H.toggleButtons)}),r.createElement("button",{className:Object(o.css)(H.popupButton,"dark"===S?H.popupButtonDark:H.popupButtonLight,"mydevice"===f&&H.popupButtonHidden),disabled:"mydevice"===f,onClick:this.handlePopup})),"web"===f&&r.createElement(A,{previewRef:C,previewURL:x,onPopupUrl:this.handlePopupUrl}),"mydevice"===f&&r.createElement(B,{width:a,connectedDevices:c,experienceURL:s,experienceName:l,name:p,onReloadSnack:h,onSendCode:b,onToggleSendCode:v,isEmbedded:E,sdkVersion:O,sendCodeOnChangeEnabled:j}),("ios"===f||"android"===f)&&r.createElement(w,{width:a,sdkVersion:O,experienceURL:s,platform:f,isEmbedded:E,payerCode:g,isPopupOpen:e,onPopupUrl:this.handlePopupUrl,onShowModal:m,onAppLaunch:d,devices:k}))}}t.default=Object(v.a)(K);const H=o.StyleSheet.create({container:{position:"relative",maxWidth:"50%",overflowX:"hidden",overflowY:"auto",display:"none",flexDirection:"column",["@media ".concat(Z)]:{display:"flex"}},embedded:{position:"relative",maxWidth:"50%",overflowX:"hidden",overflowY:"auto",display:"none",flexDirection:"column",["@media ".concat(_)]:{display:"flex"}},header:{display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 0",borderBottom:"1px solid ".concat(Object(g.a)("border-editor"))},toggleButtons:{zIndex:3},popupButton:{position:"absolute",right:0,zIndex:2,appearance:"none",height:48,width:48,padding:16,margin:0,border:0,outline:0,opacity:.8,backgroundSize:16,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:"transparent",transition:".2s",":hover":{opacity:1}},popupButtonDark:{backgroundImage:"url(".concat(n(607),")")},popupButtonLight:{backgroundImage:"url(".concat(n(606),")")},popupButtonHidden:{opacity:0,":hover":{opacity:0}}})}}]);